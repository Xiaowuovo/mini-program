<!--pages/login/login.wxml-->
<view class="login-container">
  <view class="login-header">
    <image class="logo" src="/images/logo.png" mode="aspectFit"></image>
    <view class="app-name">云端小筑</view>
    <view class="app-desc">您的专属共享菜园</view>
  </view>

  <view class="login-content">
    <view class="welcome-text">欢迎来到云端小筑</view>
    <view class="desc-text">享受种植的乐趣，体验田园生活</view>

    <!-- 登录历史 -->
    <view wx:if="{{showLoginHistory}}" class="login-history">
      <view class="history-header">
        <text class="history-title">📋 最近登录</text>
        <text class="history-clear" bindtap="clearLoginHistory">清除</text>
      </view>

      <view class="history-list">
        <view
          wx:for="{{recentLogins}}"
          wx:key="index"
          class="history-item"
          bindtap="selectHistoryLogin"
          data-nickname="{{item.nickname}}"
          data-role="{{item.role}}"
        >
          <view class="history-avatar">
            <text class="avatar-icon">{{item.role === 'admin' ? '👨‍💼' : '👤'}}</text>
          </view>
          <view class="history-info">
            <view class="history-nickname">{{item.nickname}}</view>
            <view class="history-role">
              <text class="role-badge {{item.role === 'admin' ? 'admin' : 'tenant'}}">
                {{item.role === 'admin' ? '管理员' : '用户'}}
              </text>
            </view>
          </view>
          <view class="history-arrow">›</view>
        </view>
      </view>
    </view>

    <view class="features">
      <view class="feature-item">
        <text class="feature-icon">🌱</text>
        <text>在线租地</text>
      </view>
      <view class="feature-item">
        <text class="feature-icon">📹</text>
        <text>远程监控</text>
      </view>
      <view class="feature-item">
        <text class="feature-icon">⏰</text>
        <text>智能提醒</text>
      </view>
      <view class="feature-item">
        <text class="feature-icon">💬</text>
        <text>社区交流</text>
      </view>
    </view>

    <!-- 新用户登录 -->
    <button
      class="login-btn"
      type="primary"
      bindtap="onLogin"
      loading="{{isLoading}}"
    >
      <text class="btn-icon">➕</text>
      创建新用户登录
    </button>

    <!-- 管理端入口 -->
    <view class="admin-entry" bindtap="onAdminLogin">
      <text class="admin-icon">⚙️</text>
      <text class="admin-text">创建管理员登录</text>
    </view>

    <view class="agreement">
      <text>登录即表示同意</text>
      <text class="link" bindtap="onViewAgreement">《用户协议》</text>
      <text>和</text>
      <text class="link" bindtap="onViewPrivacy">《隐私政策》</text>
    </view>
  </view>
</view>
