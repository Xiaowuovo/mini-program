<!--pages/publish-post/publish-post.wxml-->
<view class="container publish-page">
  <view class="publish-form">
    <!-- æ ‡é¢˜è¾“å…¥ -->
    <view class="form-item">
      <textarea
        class="title-input"
        placeholder="æ·»åŠ æ ‡é¢˜ï¼ˆé€‰å¡«ï¼‰"
        value="{{title}}"
        bindinput="onTitleInput"
        maxlength="50"
        auto-height
      ></textarea>
      <text class="char-count">{{title.length}}/50</text>
    </view>

    <!-- å†…å®¹è¾“å…¥ -->
    <view class="form-item">
      <textarea
        class="content-input"
        placeholder="åˆ†äº«ä½ çš„ç§æ¤ç»éªŒ..."
        value="{{content}}"
        bindinput="onContentInput"
        maxlength="1000"
        auto-height
      ></textarea>
      <text class="char-count">{{content.length}}/1000</text>
    </view>

    <!-- å›¾ç‰‡é€‰æ‹© -->
    <view class="images-section">
      <view class="images-grid">
        <!-- å·²é€‰å›¾ç‰‡ -->
        <view
          wx:for="{{images}}"
          wx:key="index"
          class="image-item"
        >
          <image
            src="{{item}}"
            mode="aspectFill"
            class="preview-image"
            bindtap="previewImage"
            data-index="{{index}}"
          ></image>
          <view
            class="delete-icon"
            catchtap="deleteImage"
            data-index="{{index}}"
          >
            âœ•
          </view>
        </view>

        <!-- æ·»åŠ æŒ‰é’® -->
        <view
          wx:if="{{images.length < maxImages}}"
          class="add-image-btn"
          bindtap="chooseImage"
        >
          <text class="add-icon">ğŸ“·</text>
          <text class="add-text">æ·»åŠ å›¾ç‰‡</text>
          <text class="add-count">{{images.length}}/{{maxImages}}</text>
        </view>
      </view>
    </view>

    <!-- å‘å¸ƒæç¤º -->
    <view class="tips-section">
      <text class="tips-title">å‘å¸ƒé¡»çŸ¥ï¼š</text>
      <text class="tips-item">Â· åˆ†äº«çœŸå®çš„ç§æ¤ç»éªŒ</text>
      <text class="tips-item">Â· ç¦æ­¢å‘å¸ƒå¹¿å‘Šä¿¡æ¯</text>
      <text class="tips-item">Â· å°Šé‡ä»–äººï¼Œæ–‡æ˜äº¤æµ</text>
    </view>
  </view>

  <!-- åº•éƒ¨æ“ä½œæ  -->
  <view class="bottom-bar">
    <button class="save-btn" bindtap="saveDraft">
      ä¿å­˜è‰ç¨¿
    </button>
    <button
      class="publish-btn"
      bindtap="publishPost"
      disabled="{{submitting}}"
    >
      {{submitting ? 'å‘å¸ƒä¸­...' : 'å‘å¸ƒ'}}
    </button>
  </view>
</view>